
<!DOCTYPE html>
<html lang="en">
<head>
    <title> Bram's Portfolio</title>
    <link rel =  "stylesheet" type = "text/css" href = "robotSummerStyle.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,100;0,300;0,400;0,700;0,900;1,100;1,300;1,400;1,700;1,900&family=Roboto:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    <meta charset="UTF-8">
    <meta name = "viewport"  content = "width = device-width, initial-scale=1">
    <style>
        body {
            font-family: 'Roboto', sans-serif;
        }
    </style>
</head>

<body style = "margin:0"> 
    <div id="header"></div>
    <article>
        <div class = "main_image">
            <img src="/media/robot_header.png" alt = "Robot Summer Image">
        </div>
        <h1>ENPH253 Robot Summer: Big Dawg</h1>
        <h2>Sunday, August 10, 2025</h2>
        <hr>
        <p>
            Many Engineering Physics students look forward to the summer of their second year in university, and for good reason. 
            It marks the beginning of a rigorous yet friendly competition coloquially known as "Robot Summer."
            Teams of four compete to design a robot that autonomously navigates a course that changes every year. This 
            year, the theme was Pet Rescue! Pets (represented by beanie babies) are trapped in a burning building and it's our 
            job to save them!
        </p>
        <h3>Tackling the Design Challenge</h3>
        <p>Our team quickly realized there was a lot more to rescuing a pet than we had initially imagined. Not only did the robot had to drive along a line, it also had to
            be able to concurrently detect pets, determine distances, relay information to the claw, and of course actually pick up pets. This requires integration of the three 
            main branches of Engineering Physics: Software, Mechanical, and Electrical engineering. I was delegated to the majority of electrical and software work. As such, my first
            project was figuring out the circuit to drive the motors, which introduced my long debugging battle with one of the most infamous circuits: the H-Bridge.
        </p>
        <h3>H(ate)-Bridges: My Mortal Enemy</h3>
        <p>One of the most important aspects of an autonomous robot is the driving system. Without it, the robot can't really
            do anything of practical use. While it's possible that you could wire up a MOSFET with a PWM to the gate and change the speed
            of a motor, this only allows unidirectional rotation unless you physically flip the voltage leads. That's where the H-Bridge comes in:
            it allows you to spin a motor in both directions through PWM. 
        </p>
        <div class = "hbridge_schematic">
            <img src = "/media/hbridge_schematic.png" alt = "H-Bridge Schematic">
            <h4>Fig. 1: H-Bridge Schematic</h4>
        </div>
        <p>This was my first real foray into circuit design and using software like KiCad. The circuit shown here was designed by one of our instructors,
            which I drew up in KiCad. To make our robot cleaner and easier to debug, we decided to order PCBs, which meant I had to design 
            custom boards for all of our circuits. Shown below is the PCB design we ended up with, after a couple of revisions. One of the key aspects of this design
            is the spike-filtering capacitors and larger traces going to the motors. These are both to ensure smooth operation of the H-Bridge and 
            to avoid any possible blown wires.
        </p>
        <div class = "pcb_images">
            <img src = "/media/pcb_schematic.png" alt = "H-Bridge PCB">
            <h4>Fig. 2: H-Bridge PCB Schematic</h4>
            <img src = "/media/pcb_model.png" alt = "H-Bridge Model">
            <h4>Fig. 3: H-Bridge PCB Model</h4>
        </div>
        <p>So, I soldered up the H-Bridge and tested it, and it worked on the first try! Is what I would have said if I hadn't faced multiple weeks of debugging and redesign.
            As it stood, only the top H-Bridge worked on my dual-H-Bridge PCB, and even then it was finicky. I would encounter shoot-through, noise, and temporary operation until 
            it would randomly fail. This obviously made testing other parts of our robot incredibly difficult. I will spare you the 2+ weeks of debugging multiple hours a day, but 
            I assure you I would check for shorts in my soldering, ensure inputs were properly connected, etc...
            My best guess after many painful hours would be some sort of design flaw in the PCB itself - although the schematic was correct, there are portions
            of the ground plane and +12V plane that are connected by only thin vias. While on the surface this shouldn't matter too much (they are electrically connected, after all), I believe it may have 
            some significant implications.
        </p>
        <p>
            I think this is a good time to mention that this dual H-Bridge design is somewhat out of spec. Rather than using two PWM signals, it uses a single PWM and a direction pin at logic HIGH or LOW.
            It abuses the built-in timer pins on our gate driver, the LT1161, by triggering the over-current detector and telling the gate driver to turn off one half of the bridge.
            These timer pins are linked to the sense pins, which trigger a shut-off if the sense pin drops 65mV below the positive voltage supply. The fact that the +12V plane is occasionally
            connected by what is effectively a wire definitely leaves an avenue for voltage differences across the board's planes. However, I can't be sure. Due to this inconsistent behavior,
            I ended up scrapping this design and switching to a simpler, more traditional dual-PWM input H-Bridge design, shown below. Lo and behold, much to my relief, these generally worked
            right after soldering, albeit they do not have the professional luster that comes with manufactured PCBs.
            
        </p>
        <div class = "new_hbridge">
            <img src = "/media/new_bridge.jpg" alt = "New Dual-PWM H-Bridge">
        </div>
        <h4>Fig. 4: Final H-Bridge Board</h4>
        <div class = "video">
            <video height = "480" playsinline autoplay loop muted>
                <source src="/media/IMG_1543.mp4" type="video/mp4"/>
            </video>
        </div>
    </article>

    <script>
        fetch("/header.html")
            .then(res => res.text())
            .then(data => document.getElementById("header").innerHTML = data);
    </script>
</body>
